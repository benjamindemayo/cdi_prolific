---
title             : "Web-CDI: A system for online administration of the MacArthur-Bates Communicative Development Inventories"
shorttitle        : "Web-CDI"

author: 
  - name          : "Benjamin deMayo"
    affiliation   : "1"
    corresponding : yes    # Define only one corresponding author
    address       : "Peretsman Scully Hall, Princeton, NJ 08540"
    email         : "bdemayo@princeton.edu"
  - name          : "Danielle Kellier"
    affiliation   : "2"
  - name          : "Mika Braginsky"
    affiliation   : "3"
  - name          : "Christina Bergmann"
    affiliation   : "4"
  - name          : "Cielke Hendriks"
    affiliation   : "4"
  - name          : "Caroline Rowland"
    affiliation   : "4"
  - name          : "Michael C. Frank"
    affiliation   : "5"
  - name          : "Virginia Marchman"
    affiliation   : "5"



affiliation:
  - id            : "1"
    institution   : "Princeton University"
  - id            : "2"
    institution   : "University of Pennsylvania"
  - id            : "3"
    institution   : "Massachussetts Institute of Technology"
  - id            : "4"
    institution   : "Max Planck Institute for Psycholinguistics"
  - id            : "5"
    institution   : "Stanford University"

abstract: |
  Understanding the mechanisms which drive variation in children’s language acquisition requires large, population-representative datasets of children’s word learning across development. Parent report measures such as the MacArthur-Bates Communicative Development Inventories (CDI) are commonly used to accrue such data, but the traditional paper-based forms make the curation of large datasets logistically challenging, and tend to rely on convenience samples located close in proximity to major research institutions. Here, we introduce Web-CDI, a web-based tool which allows researchers to collect CDI data online. Web-CDI contains functionality to collect and manage longitudinal data, share links, and download standardized vocabulary scores. To date, over 3,500 valid Web-CDI administrations have been completed. General trends found in past norming studies of the CDI are present in data collected from Web-CDI: scores of children’s productive vocabulary grow with age, female children show a slightly faster rate of vocabulary growth in early childhood, and participants with higher levels of education attainment report slightly higher vocabulary production scores. We also report results from an effort to oversample non-white, lower-SES participants (N = 241), which showed similar demographic trends to the full sample but which had a high exclusion rate. Implications and challenges for the collection of large, population-representative datasets using Web-CDI in future research are discussed. 
  
keywords          : "vocabulary development, parent report, socioeconomic status"
wordcount         : "X"

bibliography      : ["wordbank_cdi.bib"]

floatsintext      : no
figurelist        : no
tablelist         : no
footnotelist      : no
linenumbers       : yes
mask              : no
draft             : no

documentclass     : "apa7"
classoption       : "man"
output            : papaja::apa6_pdf
---

```{r setup, include = FALSE}
library(papaja)
library(tidyverse)
library(fs)
library(xtable)
library(kableExtra)
library(cowplot)
library(scales)
library(estimatr)

source(path(here::here(), "file_paths.R"))
source(functions_script)

#Read in (somewhat) preprocessed forms of the data
load(wg_unfiltered_path)
load(ws_unfiltered_path)
load(wg_filtered_path)
load(ws_filtered_path)
```


```{r analysis-preferences}
# Seed for random number generation
set.seed(42)
knitr::opts_chunk$set(cache.extra = knitr::rand_seed, warning = FALSE, message = FALSE)
```

Children vary tremendously in their vocabulary development [@Frank2021]. Characterizing this variability is central to understanding the mechanisms that drive early language acquisition, yet capturing this variation in broad, diverse samples of children has been a significant challenge for cognitive scientists for decades. The MacArthur-Bates Communicative Development Inventory (MB-CDI, or CDI for short) is a commonly-used parent report instrument for assessing vocabulary development in early childhood [@fenson2007] that was introduced in part to create a cost-effective method for measuring variability across individuals. 

In this paper, we introduce a web-based tool, Web-CDI, developed to address the need for collecting CDI data in an online format. Web-CDI allows researchers to increase the convenience of CDI administration, further decrease costs associated with data collection and entry, and access participant samples that have traditionally been difficult to reach in language development research. Our purpose in this paper is twofold: first, we describe Web-CDI as a platform which streamlines the process of collecting MB-CDI data and collates the data in a way that facilitates the creation of large-scale, multisite collaborative datasets. Second, we profile usage of Web-CDI thus far, with a particular focus on broadening the reach of traditional paper-based methods of collecting vocabulary development data.

We begin by discussing parent report as a powerful method by which to address the challenge of measuring early language outcomes, as well as previous online parent report instruments. We then describe Web-CDI and its use from the perspective of participants and researchers. Finally, we report on our use of Web-CDI thus far and discuss the potential of Web-CDI to acquire vocabulary data from diverse, population-representative samples. We end with some challenges for future research.

## The Importance of Parent Report Data
Gaining empirical traction on variation in children’s early language requires reliable and valid methods for measuring language abilities, especially in early childhood (8 to 30 months). Parent report is a mainstay in this domain. Parent reports are based on their daily experiences with the child, which are much more extensive than a researcher or clinician can generally obtain. Moreover, they are less likely to be influenced by factors that may mask a child’s true ability in the laboratory or clinic (e.g., shyness; @Frank2021), and parents are remarkably accurate at reporting their children’s language, especially in the first two years of life (CITE). One widely used set of parent-report instruments is the MacArthur-Bates Communicative Development Inventories, originally designed for children learning American English [@fenson2007]. The American English CDIs come in two versions, Words & Gestures for children 8 to 18 months, focusing on word comprehension and production, as well as gesture use, and Words & Sentences, for children 16 to 30 months, focusing on word production and sentence structure. Together, these instruments allow for a comprehensive picture of milestones that characterize language development in the first 2½ years of life. 

A substantial body of evidence suggests that these instruments are both reliable and valid [e.g., @fenson1994; @fenson2007] leading to their widespread use in thousands of research studies over the last few decades. Indeed, the popularity of the American English and Spanish CDI instruments has meant that many teams around the world have adapted the CDI format to the particular language and community [@dale2015]. Importantly, these adaptations are not simply translations of the original form but rather incorporate the specific features of different languages and cultures, since linguistic variability exists even among cultures that share a native language (e.g., Cheerios are more common in American than British homes, so age of acquisition of this word may differ substantially). To date there are now more than 100 adaptations for languages around the globe. 

Initial large-scale work to establish the normative datasets for the American English CDI not only provided key benchmarks for determining children’s progress, but also documented the extensive individual differences that characterize early language learning during this critical period of development [@fenson1994; @bates1994]. Understanding the origins and consequences of this variability remains an important empirical and theoretical endeavor that has informed critical insights in the field [e.g., @Bates2001; @bornstein2012; see also, @Frank2021]. The popularity of the instruments has remained strong over the years, leading to the development of extensions of the methodology to alternative formats, e.g., short forms [@fenson2000b]. 

While the reliability and validity of these instruments is well-established [@fenson2007] for the American English versions of the forms, existing norming samples are skewed toward families with more years of formal education and away from non-White groups. Representation in the norming samples is generally restricted to families living on the US east and west coasts (CITE FOR THIS). Further, although paper survey administration is a time-tested method, increasingly researchers and participants would prefer to use an electronic method to administer and fill CDI forms, obviating the need to track (and sometimes mail) paper forms, and the need to key in hundreds of item-wise responses for each child.  

Here, we report on our recent efforts to create and distribute a web-based version of the MacArthur-Bates CDIs in order to address some of the limitations of the standard paper versions. Online administration of the CDI is not a novel innovation – a variety of research groups have created purpose-build platforms for administering the CDI in particular languages. For example, @kristoffersen2013 collected a large normative sample of Norwegian CDIs using a custom online platform. Similarly, the Slovak adaptation of the CDI uses an online administration format (CHECK CITE HERE). And many groups have used general purpose survey software such as Qualtrics and Survey Monkey to administer CDIs and variants online (e.g., @Caselli2020). The innovation of Web-CDI is to provide a comprehensive researcher management interface for the administration of a wide range of CDI forms, allowing researchers to manage longitudinal administrations, download standardized scores, and share links easily, all while satisfying strong guarantees regarding privacy and anonymity. Moreover, a key benefit of a unified data collection and storage system such as Web-CDI is that data from disparate sources are combined into a single repository, far reducing the overhead efforts associated with bringing together data collected using paper forms by researchers across the world.  

## Introducing Web-CDI 
Web-CDI is our web-based platform for CDI administration and management. Parents are recruited by either receiving an individual URL directly from a researcher or by interacting with a targeted social media advertisement using general-purpose URLs. Web-CDI serves as a low-risk method that allows researchers to communicate with families electronically, facilitating access to families in areas distant from an academic institution and eliminating costly mailings or laboratory visits. It also permits other institutions to use Web-CDI as a resource, while still allowing members of the CDI Advisory Board to access and analyze the resulting data with the researchers’ permissions. Since 2018, more than 3000 CDIs have been collected via 15 research groups throughout the US, demonstrating the potential for large-scale data collection and aggregation.  

Below, we outline how Web-CDI is used. We begin by detailing the consent obtention process and participant experience. Second, we describe the interface that researchers use to collect data using Web-CDI, specifying a number of common use cases for the platform. Lastly, we briefly discuss the administrator role. 

### Participant interface
Participants can complete the Web-CDI on a variety of devices, including personal computers and tablets; Web-CDI can be administered on a smartphone, although the experience is not as ideal for the user due to the length of the survey. When a participant clicks a link to the form, they are directed to a website displaying their own personal administration of the Web-CDI, regardless of whether the link was participant-specific or general-purpose. In some cases, they may be asked to read and accept a waiver of consent documentation, depending on whether the researcher has chosen to use that feature (see also Researcher Interface below). 

*Demographics.* The parent is then asked to provide demographic information about their family and any health conditions that might impact their child’s vocabulary development. The specific demographic questions asked of participants can be adjusted to vary between different versions of the form, allowing researchers to tailor the demographic questions to local norms^[For example, the Dutch CDI omits questions about participant ethnicity, since census data in the Netherlands does not include ethnicity.]. Researchers can customize the presentation of these demographic questions in three ways. First, they can elect to show all of the demographics items on the landing page or they elect to present the majority of these questions at the end of the instrument. This choice is provided because some pilot work in the United Kingdom indicated that answering questions regarding personal health information at the beginning may deter participants from completing the instrument. Second, certain demographic questions can be asked at both the beginning and the end of the form to serve as validity checks, providing a check that can be used to screen for hasty or illegitimate completions. Third, researchers can tailor the questions to the societal and cultural context of their participants (e.g. country-specific education level descriptors and income categories).

```{r pictorial, fig.cap= "Pictorial instructions in the Web-CDI Words and Sentences instrument."}

img <- png::readPNG(path(fig_directory, "pictorial_instructions.png"))

grid::grid.raster(img)
```


*Instructions.* After completing the first demographics page, participants are directed to the instructions that are appropriate for either the Words & Gestures or Words & Sentences version (see Figure \ref{fig:pictorial}). At the top of the page are general instructions that inform participants that they should expect the study to take at least 30 minutes and that they should try to complete it in a quiet setting( e.g., while their child is sleeping). In addition, there are more detailed instructions for completing the vocabulary checklist. Unlike the traditional paper versions, instructions on how to properly choose responses are provided both in written and pictorial form. The pictorial instructions (Figure 1) aim to further increase caregivers’ understanding of how to complete the checklist. For example, these instructions clarify that the child’s understanding of a word requires them to have some understanding of the object that the word refers to or some aspect of the word’s meaning. In addition, caregivers are reassured that “child like” forms (e.g., “raff” for “giraffe”) or family- or dialect-specific forms (e.g., “nana” for “grandma” are acceptable).  Lastly, caregivers are reminded that the child should be able to produce the words “on their own” and that imitations are not acceptable. These general “rules of thumb” for completing the form should be familiar to researchers who are distributing the forms to parents so they can field any questions that may arise. While this is not possible for certain use-cases (e.g., collecting data via Facebook), these instructions should ideally also be reviewed either in writing (e.g., via email) or verbally (e.g., over the phone), so that these pictured instructions serve merely as a reminder to caregivers when completing the form.   

*Completing the instrument.* The majority of the participant’s time in the study is spent completing the main sections of the instruments. As shown in Figure 2, on the American English Words and Gestures form, the vocabulary checklist portion of the form (396 items) asks parents to indicate whether their child can “understand” or “understand and say” each word. Gesture communication and other early milestones are also assessed. In the American English Words and Sentences form, the vocabulary checklist (680 items) only asks parents to indicate which words their child “says”. Additional items assess children’s production of their three longest sentences, as well as morphological and syntactic development more broadly. 

At the completion of the form, a graph is displayed illustrating the proportion of words from each semantic category that the child currently produces or understands. In addition, data from the norming studies are used to estimate the ‘hardest’ (i.e., most advanced) word that the child currently understands or produces. This feedback to parents is intended to provide parents with a fun “thank you” and is intentionally not designed to provide specific feedback about their child’s progress. The closing page also reminds parents that their participation does not constitute a clinical evaluation and that they should contact their pediatrician or primary care physician if they have any concerns about their child’s development. 

### Researcher Interface

```{r}
options_table <- 
  read_csv(
    path(
      project_root,
      "paper",
      "options_table",
      ext = "csv"
    )
  ) %>% 
  filter(!is.na(`Study setting`)) 

options_table %>% 
  kbl(
    booktabs = TRUE, 
    longtable = TRUE,
    linesep = "", 
    caption = "Settings customizable by researchers when creating new studies to be run on the Web-CDI platform."
  ) %>% 
  kable_styling(
    position = "center",
    latex_options = "repeat_header"
  ) %>% 
  column_spec(c(1, 3), width = "2.2in") %>% 
  column_spec(2, width = "1in") %>% 
  row_spec(0, bold = TRUE)
  

```


One of the main goals of Web-CDI is to facilitate wide distribution of the platform to the child language research community. To that end, researchers are required to contact a member of the CDI Advisory Board to register an account on Web-CDI, from which they can create studies to distribute to participants. Note that we ask that researchers allow fully anonymised data to be shared with us, so that it can be added to Wordbank (http://wordbank.stanford.edu/). However, there is an opt-out option if researchers do not wish to share their data.

A study in the context of the Web-CDI system is a set of individual administrations created by a researcher that share certain specifications. Table 1 gives an overview of the customizable features that are available at the study level in Web-CDI. These features are set when creating a study for the first time in Web-CDI using the “Create Study” tool, and most of the features can be updated continuously during data collection using the “Update Study” tool. While some of these features are only particularly relevant to specific use cases (e.g., longitudinal research and social media data collection, outline below), others are relevant to all researchers using Web-CDI.

There are currently several forms available for distribution on Web-CDI, including multiple versions of the English WG and WS forms and forms in other languages (see Cross-linguistic research below). When creating a study, researchers choose one of the forms that they would like to distribute to participants; only one can be used in a given study. Researchers who wish to send multiple forms to participants simultaneously (e.g., those conducting multilingual research) should create multiple studies, each with a single instrument associated with it.

Researchers can download participant data in two formats. Both formatting options output a comma-separated values file with one row per participant; the full data option includes participant-by-item responses, and allows researchers to explore item-level trends, while the summary data option omits item-level data and only provides summary scores (e.g., total number of words understood/produced, percentile scores by age and gender).

Below, we outline several possible use cases of Web-CDI, as well the features which may facilitate them from a researcher’s perspective.

*Individual recruitment.* One possible workflow using Web-CDI is to send unique study URLs to individual participants. Researchers do so by entering numerical participant IDs or by auto-generating a specified quantity of participant IDs, each with its own unique study URL, using the “Add Participants” tool in the researcher dashboard. New participants can be added on a continual basis so that researchers can adjust the sample size of their study during data collection. Unique links generated for individual participants expire, by default, 14 days after creation, though the amount of days before link expiration is adjustable, which may be an important consideration for some researchers depending on their participant populations and specific project timelines. This workflow is most suitable for studies which pair the CDI with other measures, or when researchers contact specific participants from an existing database.

*Longitudinal studies.* Web-CDI also facilitates longitudinal study designs in which each participant completes multiple administrations. Researchers wishing to design longitudinal studies can do so by entering a list of meaningful participant IDs using the “Add Participants” tool in the researcher dashboard. If a certain participant ID is added multiple times, Web-CDI will create multiple unique study URLs in the study dashboard that have the same specified ID. In addition, when creating studies, researchers can select whether they would like the demographics information, vocabulary checklist, or no sections at all to be prefilled when a participant fills out a repeat administration of the instrument. Unless researchers are interested in cumulative vocabulary counts, it is strongly recommended that they do not use the option to pre-fill the vocabulary checklist portion of the instrument in longitudinal administrations as parents should complete the instrument at each time point independently.

*Social media and survey vendors.* Web-CDI contains several features designed to facilitate data collection from social media recruitment or through third-party crowd-sourcing applications and vendors (e.g., Amazon Mechanical Turk, Prolific). First, rather than creating unique survey links for each participant, researchers can also use a single, anonymous link. When a participant clicks the anonymous link, a new administration with a unique subject ID is created in the study dashboard. Additionally, Web-CDI studies have several customizable features that are geared towards anonymous online data collection. For example, researchers can adjust the minimum amount of time a participant must take to fill out the survey before they are able to submit; with a longer minimum time to completion, researchers can encourage a more thorough completion of the survey. Researchers can also ask participants to verify that their information is accurate by checking a box at the end of the survey, and can opt to include certain demographic questions at both the beginning and end of the survey, using response consistency on these redundant items as a check of data quality.

*Paid participation.* If researchers choose to compensate participants directly through the Web-CDI interface, Web-CDI has built-in functionality to distribute redeemable gift codes when a participant reaches the end of the survey. Web-CDI contains several features to facilitate integration with third-party crowdsourcing applications and survey vendors should they choose to handle participant compensation through another platform. For example, when creating studies, researchers can enter a URL to redirect participants to when they reach the end of the survey. Researchers using the behavioral research platform Prolific can configure their study to collect participants’ unique Prolific IDs and pre-fill them in the survey.

*Cross-linguistic research.* Web-CDI forms are currently available in English (U.S. American and Canadian), Spanish, French (Quebecois), Hebrew, Dutch and Korean. We are looking to add more language forms to the tool as the paper version of the forms has been adapted into more than 100 different languages and further ongoing adaptations have been approved by the MB-CDI board (http://mb-cdi.stanford.edu/adaptations).

### Administrator Interface

System administrators who oversee the development and usage of Web-CDI can log into a specific interface provided by Django, the open-source web framework used to develop Web-CDI. This Django interface gives access to the entire dataset collected by all participating researchers, as well as all of the instrument forms that can be distributed to participants. Administrators approve new researchers’ requests to create accounts on Web-CDI, and give individual researchers access to specific instrument forms. As an example, if a researcher wants to distribute the Spanish Words and Gestures form to participants, an administrator would need to give a researcher access to this instrument. Administrator privileges are limited to a handful of individuals, as most of the functionality accessible to administrators is not relevant to researchers using the survey for their own purposes.

### System Design

Web-CDI is constructed using open-source software. All of the vocabulary data collected in Web-CDI are stored in a standard MySQL relational database, managed using Django and Python and hosted by Amazon Web Services. Individual researchers can download data from their studies through the researcher interface, and Web-CDI admins have access to the entire aggregate set of data from all studies run with Web-CDI. Website code is available in a GitHub repository https://github.com/langcog/web-cdi, where interested users can browse, make contributions and request technical fixes.

### Data Privacy and GDPR Compliance

Web-CDI is designed from the ground up to be compliant with stringent human subjects privacy protections across the world. First, for US users, we have designed Web-CDI based on the United States Department of Health and Human Services “Safe Harbor” Standard for collecting protected health information as defined by the Health Insurance Portability and Accountability Act (HIPAA). In particular, participant names are never collected, birth dates are used to calculate age in months (with no decimal information) and never stored, and geographic zip codes are trimmed to the first 3 digits. Because of the architecture of the site, even though participants enter zip codes and dates of birth, these are never transmitted in full to the Web-CDI server.  Since no identifying information is being collected by the Web-CDI system, this feature ensures that Web-CDI can be used by United States labs without a separate Institutional Review Board agreement between users labs and Web-CDI (though of course researchers using the site will need Institutional Review Board approval of their own research projects)^[Issues of de-identification and re-identifiability are complex and ever changing. In particular, compliance with DHHS “safe harbor” standards does not in fact fully guarantee the impossibility of statistical re-identification in some cases and if potential users have questions, we encourage them to consult with an Institutional Review Board.]. 

In the European Union (EU), research data collection and storage is governed by the Generalized Data Protection Regulation (GDPR) and its local instantiation in the legal system of the member states. Some of the questions on the demographic form contain information that may be considered sensitive (e.g., information about children’s developmental disorders), and in some cases, the possibility of linking this sensitive information to participant IDs exists, particularly when researchers draw on local databases that contain full names and addresses for recruitment and contacting.  As a result, issues regarding GDPR compliance arise when transferring data outside the EU, namely to Amazon Web Services servers housed in the United States. Following GDPR regulations, these issues would make a data sharing agreement between data collectors and Amazon Web Services necessary. In addition, all administrators who can access the collected data would have to enter such an agreement, which needs updating whenever personnel changes occur. To overcome these hurdles and in consultation with data protection officers, we opted to exploit the local technical expertise and infrastructure to set up a sister site housed on GDPR-compliant servers, currently available under webcdi.mpi.nl. This site is updated synchronously with the main Web-CDI website to ensure a consistent user experience and access to the latest features and improvements. This site has been used in 135 successful administrations so far and is the main data collection tool for an ongoing norming study in the Netherlands. We are further actively advertising the option to use the European site to other labs who are following GDPR guidelines and are planning adaptations to multiple European languages, where copyright allows.

## Current Usage and Data

```{r total_n}
#number of administrations before exclusions
unfiltered_n_wg <- nrow(all_wg_raw)
unfiltered_n_ws <- nrow(all_wg_raw)
unfiltered_n_total <- unfiltered_n_ws + unfiltered_n_wg

#number of administrations after exclusions
filtered_n_wg <- nrow(wg_filtered)
filtered_n_ws <- nrow(ws_filtered)
filtered_n_total <- filtered_n_wg + filtered_n_ws

#number of exclusions_
exclusions_n_wg <- unfiltered_n_wg - filtered_n_wg
exclusions_n_ws <- unfiltered_n_ws - filtered_n_ws
exclusions_n_total <- unfiltered_n_total - filtered_n_total

```

```{r}

load(full_sample_exclusions)

exclusion_tbl_full %>% 
  kbl(
    booktabs = TRUE, 
    linesep = "", 
    caption = "Exclusions from full WebCDI sample"
  ) %>% 
  kable_styling(
    position = "center"
  ) %>% 
  column_spec(1, width = "2.2in") %>% 
  column_spec(2:5, width = "1in") %>% 
  row_spec(0, bold = TRUE)

```


One of the key benefits of Web-CDI use is that the system in effect becomes a centralized repository for standardized administrations of the CDI, contributing anonymized data (again, on an opt-out basis) to future research and norming efforts. In this section, we provide some preliminary analyses of the American English Web-CDI, demonstrating the potential of the Web-CDI system to provide a distributed platform for gathering large CDI datasets. 

At time of writing, researchers from 15 universities in the United States have collected over 5,000 administrations of the American English CDI using Web-CDI since it was launched in late 2017, with `r formatC(unfiltered_n_wg, big.mark = ",", big.interval = 3)` administrations of the WG form and `r formatC(unfiltered_n_ws, big.mark = ",", big.interval = 3)` administrations of the WS form. We excluded participants from the subsequent analyses based on a set of stringent criteria intended for the creation of future normative datasets. We excluded participants if it was not their first administration of the survey; if they were born prematurely or had a birthweight under 5.5 lbs (< 2.5 kg); reported more than 16 hours of exposure to a language other than English per week on average (amounting to >10% exposure to English); had serious vision impairments, hearing deficits or other developmental disorders or medical issues^[Exclusions on the basis of child health were decided on a case-by-case basis by author V.M. in consultation with Philip Dale, Donna Thal and Larry Fenson.]; completed the survey unrealistically quickly (defined here as in fewer than 8.5 minutes); or were outside of the correct age range for the survey. The exclusion criteria we used differed from the most recent norming study of the WG measure in the United Kingdom [@Alcock2020] in order to comply more closely with the criteria used in @fenson2007, who used more stringent criteria to establish vocabulary norms that reflect typically developing children’s vocabulary trajectories. A complete breakdown of the number of participants excluded on each criterion is in Table 2. Of the completed WG forms, `r formatC(exclusions_n_wg, big.mark = ",", big.interval = 3)` were excluded, leading to a final WG sample size of `r formatC(filtered_n_wg, big.mark = ",", big.interval = 3)` administrations, and `r formatC(exclusions_n_ws, big.mark = ",", big.interval = 3)` WS administrations were excluded, leading to a final WS sample size of `r formatC(filtered_n_ws, big.mark = ",", big.interval = 3)`. 

```{r}

#demographic information of the entire sample
demographics_df <- 
  bind_rows(
    wg_filtered %>% 
      select(
        study_name,
        subject_id,
        age,
        ethnicity, 
        maternal_ed, 
        produced,
        sex
      ),
    ws_filtered %>% 
      select(
        study_name,
        subject_id,
        age,
        ethnicity,
        maternal_ed,
        produced,
        sex
      )
  )

#tibble for ethnicity plot
ethnicity_plot_df <- 
  demographics_df %>% 
  getEthnicitySummary() %>% 
  mutate(`Web-CDI sample` = prop.table(n)) %>% 
  filter(ethnicity != "No ethnicity reported") %>% 
  left_join(old_ethnicity_numbers, by = "ethnicity") %>% 
  left_join(census_ethnicity_numbers, by = "ethnicity") %>% 
  select(-n) %>% 
  pivot_longer(
    cols = c(`Web-CDI sample`, `2007 manual`, `U.S. Census Estimates`),
    names_to = "study",
    values_to = "proportion"
  )

#ethnicity plot
ethnicity_plot <-
  ethnicity_plot_df %>% 
  ggplot(aes(ethnicity, proportion, fill = study)) +
  geom_col(position = "dodge") +
  labs(
    y = "Proportion of\nrespondents"
  ) +
  ggthemes::theme_few() +
  theme(
    legend.title = element_blank(), 
    axis.text.x = element_text(
       angle = 25, 
       vjust = 0.9, 
       hjust = 1
     )
  ) +
  labs(x = "Ethnicity") +
  scale_fill_viridis_d() +
  coord_cartesian(ylim = c(0, .81))

maternal_ed_plot_df <- 
  demographics_df %>% 
  count(maternal_ed) %>% 
  mutate(`Web-CDI sample` = prop.table(n)) %>% 
  left_join(old_momed_numbers, by = "maternal_ed") %>% 
  left_join(census_momed_numbers, by = "maternal_ed") %>% 
  select(-n) %>% 
  pivot_longer(
    cols = c(`Web-CDI sample`, `2007 manual`, `U.S. Census Estimates`),
    names_to = "study",
    values_to = "proportion"
  ) %>% 
  mutate(
    maternal_ed = fct_relevel(
      maternal_ed,
      "Some high school or less",
      "High school diploma",
      "Some college education",
      "College diploma or more"
    )
  )

x_axis_labs <- c(
  "Some high school\n or less",
  "High school\ndiploma",
  "Some college\neducation",
  "College diploma\nor more"
)

maternal_ed_plot <- 
  maternal_ed_plot_df %>% 
  filter(maternal_ed != "Not reported") %>% 
  ggplot(aes(maternal_ed, proportion, fill = study)) +
  geom_col(position = "dodge") +
  labs(x = "Primary caregiver education") +
  ggthemes::theme_few() +
  theme(
    legend.title = element_blank(),
    axis.text.x = element_text(angle = 25, vjust = 0.9, hjust = 1)
  ) + 
  scale_x_discrete(labels = x_axis_labs) +
  scale_fill_viridis_d() +
  coord_cartesian(ylim = c(0, .81))

prow <- cowplot::plot_grid(
  ethnicity_plot + 
    theme(
      legend.position = "none", 
      plot.margin = (margin(r = 2, l = 0)),
      axis.text = element_text(size = 21),
      axis.title = element_text(size = 21)
    ),
  maternal_ed_plot + 
    ylab(NULL) + 
    theme(
      legend.position = "none", 
      plot.margin = (margin(r = 2, l = 2)),
      axis.text = element_text(size = 21),
      axis.title = element_text(size = 21)
    ),
  align = "hv",
  labels = c("A", "B")
)

legend <- 
  get_legend(
    ethnicity_plot + 
      # guides(color = guide_legend(nrow = 1)) + 
      # theme(legend.position = "bottom")
      theme(
        legend.box.margin = margin(0, 0, 0, 15),
        legend.text = element_text(size = 18)
      )
  )

demo_barplot <- plot_grid(prow, legend, rel_widths = c(3, .5))

ggsave(
  "demo_barplot.png", 
  plot = demo_barplot,
  path = fig_directory,
  width = 20,
  height = 8
)

demo_barplot_caption <- 
  str_c(
    "Proportion of respondents plotted by child race (A) and educational level of primary caregiver (B) from full Web-CDI sample to date (N = ", 
    formatC(filtered_n_total, big.mark = ",", big.interval = 3),
    "), compared with norming sample demographics from Fenson (2007). Latinx participants can be of any race."
  )


```


```{r demobarfig, fig.cap=demo_barplot_caption}

img_2 <- png::readPNG(path(fig_directory, "demo_barplot.png"))

grid::grid.raster(img_2)

```

```{r message=FALSE}
#Hispanic proportions

wg_hispanic <- 
  wg_filtered %>% 
  mutate(
    hispanic = !is.na(child_hispanic_latino) & child_hispanic_latino == TRUE
  ) %>% 
  count(hispanic) %>% 
  mutate(prop = n / sum(n))

ws_hispanic <-  
  ws_filtered %>% 
  mutate(
    hispanic = !is.na(child_hispanic_latino) & child_hispanic_latino == TRUE
  ) %>%
  count(hispanic)%>% 
  mutate(prop = n / sum(n))

wg_hispanic_percent <- 
  wg_hispanic %>% 
  slice(2) %>% 
  pull(prop) %>% 
  round(digits = 3) %>% 
  percent(accuracy = .1)

ws_hispanic_percent <- 
  ws_hispanic %>% 
  slice(2) %>% 
  pull(prop) %>% 
  round(digits = 3) %>% 
  percent(accuracy = .1)

```

### Demographic distribution and exclusions

Figure \ref{fig:demobarfig} shows the distribution of participant ethnicities as compared with previously reported numbers in a large scale norming study of the paper-based CDI form by @fenson2007. White participants still comprised nearly three quarters of the Web-CDI sample, while a higher proportion of participants report mixed ethnic identification as compared to the 2007 norms. Few participants identified as Hispanic/Latino: `r wg_hispanic_percent` of WG participants and `r ws_hispanic_percent` of WS participants reported Hispanic of Latino heritage. The low percentage of Hispanic/Latino participants was due in part to our exclusion of children with substantial exposure to languages other than English. Participants’ educational attainment level was similarly skewed. Over 80% of children in the Web-CDI sample came from families with college-educated mothers compared to 43% from the same group in the 2007 norms (Figure 3). Furthermore, less than 1 percent of participants in our families report a maternal education level less than a high school degree, compared to 7% from the same group in the 2007 norms. The overrepresentation of white Americans with high levels of education attainment in this sample points to a general challenge encountered in vocabulary development research, which we return to when we detail our efforts to recruit more diverse participants.

### Results to date

```{r message=FALSE}

#creating dfs for the gender plot
wg_filtered_gender <- 
  wg_filtered %>% 
  select(age, produced, sex)

ws_filtered_gender <- 
  ws_filtered %>% 
  select(age, produced, sex)

#filter out kids without a binary gender listed
all_d_gender <- 
  bind_rows(ws_filtered_gender, wg_filtered_gender) 

all_d_gender_count <- all_d_gender %>% count(sex)

n_females <- all_d_gender_count$n[1] #total number of females
n_males <- all_d_gender_count$n[2] #total number of males
n_other <- all_d_gender_count$n[3] #other participants

#count the amount of participants
all_gender_n <- sum(all_d_gender_count$n)

gender_caption <- str_c(
  "Individual children’s vocabulary production scores from the entire Web-CDI sample plotted by children’s age and gender (both WG and WS, N = ",
  formatC(all_gender_n - n_other, big.mark = ",", big.interval = 3),
  ", with ",
  formatC(n_females, big.mark = ",", big.interval = 3),
  " girls). Line is a locally weighted regression with associated 95% confidence interval. Children with a different or no reported gender (N = ",
  n_other,
  ") are omitted here."
)

```

```{r genderfig, fig.cap=gender_caption}

all_d_gender %>% 
  filter(sex != "Other") %>% 
  ggplot(aes(age, produced, color = sex)) +
  ggthemes::theme_few() +
  geom_jitter(alpha = 0.3, width = 0.225) +
  geom_smooth(method = "loess") +
  coord_cartesian(ylim = c(0, 686)) +
  labs(
    x = "Age in months", 
    y = "Total words produced",
    color = "Child gender"
  ) 
```


Although the CDI instruments include survey items intended to measure constructs other than vocabulary size, such as gesture, sentence production and grammar, we focus exclusively on the vocabulary measures here. Across both the WG and WS measures, our current Web-CDI sample shows greater reported vocabulary comprehension and production for older children. Moreover, data from both measures replicate a subtle but reliable pattern found in @fenson1994, -@fenson2007 and @feldman2000 such that female children tend to have slightly larger vocabulary scores than male children across the period of childhood assessed in the CDI forms, though this difference does not appear until the second year of life (Figure \ref{fig:genderfig}). 

```{r}

#GLM fits for WG plot
wg_momed <- 
  wg_filtered %>%
  mutate(maternal_ed = maternal_ed %>% 
           fct_collapse("High school diploma or less" = c(
             "High school diploma", 
             "Some high school or less"
           )) %>% 
           fct_relevel(
             "College diploma or more",
             "Some college education",
             "High school diploma or less"
           )) %>%
  filter(!is.na(maternal_ed)) %>%
  select(
    age, 
    `Words Understood` = understood,
    `Words Produced` = produced, 
    maternal_ed
  ) %>%
  pivot_longer(
    cols = c("Words Understood", "Words Produced"),
    names_to = "measure",
    values_to = "words"
  )

wg_momed_models <- 
  wg_momed %>%
  mutate(words_false = wg_total_words - words) %>%
  group_by(measure) %>%
  nest() %>%
  mutate(model = map(data, function(measure_data) {
    glm(cbind(words, words_false) ~ age * maternal_ed - maternal_ed,
        family = "binomial", data = measure_data)
  }))
  
data_cells_wg <- wg_momed %>% distinct(maternal_ed, age)

wg_momed_fits <- 
  wg_momed_models %>%
  mutate(fits = map(model, function(m) {
    data_cells_wg %>% 
      mutate(fitted = predict(m, newdata = data_cells_wg, type = "response"))
  })) %>%
  select(measure, fits) %>%
  unnest(fits) %>%
  ungroup() %>%
  mutate(fitted = fitted * wg_total_words)

##figure caption

wgglm_caption <- 
  str_c(
    " Individual children’s word production (left panel) and comprehension (right panel) scores plotted by age and primary caregiver’s level of education (binned into “High school diploma or less”, “Some college education”, and “College diploma or more”) as reported in the sample of Words and Gestures Web-CDI administrations collected as of November 2020 (N = ", formatC(filtered_n_wg, big.mark = ",", big.interval = 3), "). Curves show generalized linear models fits."
  )

```

```{r wgglm, fig.cap=wgglm_caption}

ggplot(wg_momed, aes(age, words, color = maternal_ed)) +
  facet_grid(~measure) +
  geom_jitter(alpha = 0.2, width = 0.225) +
  geom_line(aes(y = fitted), size = 1, data = wg_momed_fits) +
  coord_cartesian(ylim = c(0, 396)) +
  ggthemes::theme_few() +
  labs(
    color = "Maternal education level", 
    x = "Age in months", 
    y = "Number of words"
  ) +
  scale_x_continuous(breaks = seq(from = 8, to = 18, by = 2)) 


```


```{r wgmedians}
wg_med_plot <- 
  wg_filtered %>% 
   mutate(
    maternal_ed = fct_recode(
      maternal_ed,
      "High school diploma or less" = "High school diploma",
      "High school diploma or less" = "Some high school or less"
    )
  ) %>% 
  filter(!is.na(maternal_ed)) %>% 
  select(
    age, 
    `Words Understood` = understood, 
    `Words Produced` = produced, 
    maternal_ed
  ) %>% 
  pivot_longer(
    cols = c("Words Understood", "Words Produced"),
    names_to = "measure",
    values_to = "words"
  ) %>% 
  group_by(age, maternal_ed, measure) %>% 
  summarize(
    median = median(words, na.rm = TRUE),
    first_quartile = quantile(words, probs = 0.25, na.rm = TRUE),
    third_quartile = quantile(words, probs = 0.75, na.rm = TRUE)
  ) %>% 
  ggplot(aes(age, median, color = maternal_ed)) +
  facet_grid(~measure) +
  geom_point(position = position_dodge(width = 0.5)) +
  geom_linerange(
    aes(ymin = first_quartile, ymax = third_quartile),
    position = position_dodge(width = 0.5)
  ) +
  scale_x_continuous(breaks = seq(from = 8, to = 18, by = 2)) +
  coord_cartesian(ylim = c(0, 390)) +
  ggthemes::theme_few() +
  labs(
    color = "Maternal education level",
    x = "age in months",
    y = "number of words"
  ) 

ggsave(
  "median_plot.png", 
  plot = last_plot(),
  path = fig_directory,
  width = 9,
  height = 4.5
)

medplot_caption <- "Median vocabulary production (left) and comprehension (right) scores by age on the WG form. Lines indicate span between first and third quartiles for each age."
```

```{r wgmedfig, fig.cap=medplot_caption}

img_3 <- png::readPNG(path(fig_directory, "median_plot.png"))

grid::grid.raster(img_3)

```


```{r}

##fitting GLM's for WS data
ws_momed <- 
  ws_filtered %>%
  mutate(maternal_ed = maternal_ed %>% 
           fct_collapse("High school diploma or less" = c(
             "High school diploma", 
             "Some high school or less"
           )) %>% 
           fct_relevel(
             "College diploma or more",
             "Some college education",
             "High school diploma or less"
           )) %>%
  filter(!is.na(maternal_ed) & maternal_ed != "Not reported") %>%
  select(
    age, 
    produced, 
    maternal_ed
  ) 

ws_momed_models <- 
  ws_momed %>%
  mutate(words_false = ws_total_words - produced) %>%
  nest() %>%
  mutate(model = map(data, function(measure_data) {
    glm(cbind(produced, words_false) ~ age * maternal_ed - maternal_ed,
        family = "binomial", data = measure_data)
  }))
  
data_cells_ws <- ws_momed %>% distinct(maternal_ed, age)

ws_momed_fits <- 
  ws_momed_models %>%
  mutate(fits = map(model, function(m) {
    data_cells_ws %>% 
      mutate(fitted = predict(m, newdata = data_cells_ws, type = "response"))
  })) %>%
  select(fits) %>%
  unnest(fits) %>%
  mutate(fitted = fitted * wg_total_words)

wsglm_caption <- 
  str_c("Individual children’s vocabulary production scores plotted by children’s age and maternal education level of primary caregiver education as reported in the sample of Words and Sentences Web-CDI administrations collected as of November 2020 (N = ", formatC(filtered_n_ws, big.mark = ",", big.interval = 3), ").   Lines are smoothed quantile regressions showing the estimated median vocabulary score within each education group at each age.")

#number of WS participants with less than high school education

no_hs_ws <- 
  ws_filtered %>% 
  filter(maternal_ed == "Some high school or less") %>% 
  nrow()

```

```{r wsglm, fig.cap=wsglm_caption}

ggplot(ws_momed, aes(age, produced, color = maternal_ed)) +
  geom_jitter(alpha = 0.2, width = 0.225) +
  geom_line(aes(y = fitted), size = 1, data = ws_momed_fits) +
  coord_cartesian(ylim = c(0, 396)) +
  ggthemes::theme_few() +
  labs(
    color = "Maternal education level", 
    x = "Age in months", 
    y = "Number of words"
  ) +
  scale_x_continuous(breaks = seq(from = 16, to = 30, by = 2)) 


```


```{r}
#WG Linear regression models

wg_lm_df <- 
  wg_filtered %>% 
  mutate(
    age_c = age - mean(age, na.rm = TRUE),
    maternal_ed_c = mother_education - mean(mother_education, na.rm = TRUE),
    maternal_ed = fct_recode(
      maternal_ed,
      "High school diploma or less" = "High school diploma",
      "High school diploma or less" = "Some high school or less"
    )
  ) 

ses_wg_lm_comp <- 
  lm_robust(formula = understood ~ age_c * maternal_ed, data = wg_lm_df)

beta_age_comp <- ses_wg_lm_comp$coefficients[[2]]
p_age_comp <- ses_wg_lm_comp$p.value[[2]]

beta_hs_ed_comp <- ses_wg_lm_comp$coefficients[[4]]
p_hs_ed_comp <- ses_wg_lm_comp$p.value[[4]]

ses_wg_lm_prod <- 
  lm_robust(formula = produced ~ age_c * maternal_ed, data = wg_lm_df)

beta_age_prod <- ses_wg_lm_prod$coefficients[[2]]
p_age_prod <- ses_wg_lm_prod$p.value[[2]]

beta_hs_ed_prod <- ses_wg_lm_prod$coefficients[[4]]
p_hs_ed_prod <- ses_wg_lm_prod$p.value[[4]]
 
```

On the WG form, respondents’ reports of children’s vocabulary comprehension and production both increased with children’s age (Figure \ref{fig:wgglm}). We replicate overall patterns found by @feldman2000 in that, on both the “Words Understood” and “Words Produced” measures, vocabulary scores were slightly negatively correlated with primary caregivers’ education level, such that those parents without any college education reported higher vocabulary scores on both scales. A linear regression model with robust standard errors predicting comprehension scores with children’s age and primary caregivers’ education level (binned into categories of “High school diploma or less”, “Some college education” and “College diploma or more^[“High school diploma” or less corresponds to 12 or fewer years of education; “Some college” corresponds to 13 - 15 years of education; “College diploma or more” refers to 16 or more years of education.]") as predictors shows main effects of both age ($\beta$ = `r round(beta_age_comp, 3)`, $p$ < 0.001) and caregiver primary education ($\beta_{high school}$ = `r round(beta_hs_ed_comp, 3)`, $p$ = `r round(p_hs_ed_comp, 3)`). Similarly, a linear regression model with robust standard errors predicting production scores by children’s age and primary caregivers’ education level shows main effects of age ($\beta$ = `r round(beta_age_prod, 3)`, $p$ < 0.001) and caregiver primary education ($\beta_{high school}$ = `r round(beta_hs_ed_prod, 4)`, $p$ = `r broman::myround(p_hs_ed_prod, digits = 3)`). 

The pattern of results seen in the WG sample is consistent with prior findings indicating that respondents with lower levels of education attainment report higher vocabulary comprehension and production on the CDI-WG form [@fenson1994; @feldman2000]. Although caregivers with lower levels of education attainment report higher mean levels of vocabulary production and comprehension, median vocabulary scores show no clear pattern of difference across primary caregiver education levels (Figure \ref{fig:wgmedfig}). This discrepancy between the regression effects and a group-median analysis suggests that the regression effects described previously are driven in part by differential interpretation of the survey items, such that a few lower-SES caregivers are more liberal in reporting their children’s productive and comprehensive vocabularies, especially for the youngest children, driving up the mean scores for this demographic group.

Vocabulary production scores on the WS form show the expected pattern of increase with children’s age in months; in addition, scores replicate the trend reported in @feldman2000 such that maternal education is positively associated with children’s reported vocabulary size (Figure \ref{fig:wsglm}). Because representation of caregivers without a high school diploma is scarce (N = `r no_hs_ws` out of a sample of `r formatC(filtered_n_ws, big.mark = ",", big.interval = 3)`), interpretation of the data from this group is constrained. Nevertheless, as shown in Figure \ref{fig:wsglm}, a small but clear positive association between maternal education and vocabulary score exists such that college-educated caregivers report higher vocabulary scores than those of any other education level. The implications from these data converge with previous findings which indicate that parental education levels, often used as a metric of a family’s socioeconomic status, are correlated with children’s vocabulary size through early childhood. 

The data discussed above have stemmed from efforts by many researchers across the United States whose motivations for using the Web-CDI vary. As a result, they reproduce many of the biases of standard US convenience samples. In the next section, we describe in more detail our recent efforts to use the Web-CDI to collect vocabulary development data from traditionally underrepresented participant populations in the United States, attempting to counteract these trends. 






# Results

# Discussion


\newpage

# References

\begingroup
\setlength{\parindent}{-0.5in}
\setlength{\leftskip}{0.5in}

<div id="refs" custom-style="Bibliography"></div>
\endgroup
