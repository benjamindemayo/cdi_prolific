"% of full WG sample excluded",
"WS exclusions",
"% of full WS sample excluded"
)
#First take away kids who have done the survey more than once.
wg_minus_repeats <-
completed_wg %>%
filter(repeat_num == "1")
wg_repeats_n <- n_total_wg - nrow(wg_minus_repeats)
ws_minus_repeats <-
completed_ws %>%
filter(repeat_num == "1")
ws_repeats_n <- n_total_ws - nrow(ws_minus_repeats)
repeat_admins <-
c(
"Not first administration",
wg_repeats_n,
percent(wg_repeats_n / n_total_wg),
ws_repeats_n,
percent(ws_repeats_n / n_total_ws)
)
names(repeat_admins) <- excl_col_names
#Next take away kids born pre-term or with low birthweight.
wg_minus_premie <-
wg_minus_repeats %>%
filterBirthweight()
wg_premie_n <- nrow(wg_minus_repeats) - nrow(wg_minus_premie)
ws_minus_premie <-
ws_minus_repeats %>%
filterBirthweight()
ws_premie_n <- nrow(ws_minus_repeats) - nrow(ws_minus_premie)
premies <-
c(
"Premature or low birthweight",
wg_premie_n,
percent(wg_premie_n / n_total_wg),
ws_premie_n,
percent(ws_premie_n / n_total_ws)
)
names(premies) <- excl_col_names
#Next take away kids with multilingual exposure
wg_minus_multiling <-
wg_minus_premie %>%
filterMultilingual()
wg_multiling_n <- nrow(wg_minus_premie) - nrow(wg_minus_multiling)
ws_minus_multiling <-
ws_minus_premie %>%
filterMultilingual()
ws_multiling_n <- nrow(ws_minus_premie) - nrow(ws_minus_multiling)
multiling <-
c(
"Multilingual exposure",
wg_multiling_n,
percent(wg_multiling_n / n_total_wg),
ws_multiling_n,
percent(ws_multiling_n / n_total_ws)
)
names(multiling) <- excl_col_names
#Next exclude kids with problems of illness, vision, or hearing
wg_minus_health <-
wg_minus_multiling %>%
filterIllnesses() %>%
filterVision() %>%
filterHearing()
wg_health_n <- nrow(wg_minus_multiling) - nrow(wg_minus_health)
ws_minus_health <-
ws_minus_multiling %>%
filterIllnesses() %>%
filterVision() %>%
filterHearing()
ws_health_n <- nrow(ws_minus_multiling) - nrow(ws_minus_health)
health <-
c(
"Illnesses/Vision/Hearing",
wg_health_n,
percent(wg_health_n / n_total_wg),
ws_health_n,
percent(ws_health_n / n_total_ws)
)
names(health) <- excl_col_names
#Now filter out kids who are the wrong age
wg_minus_age <-
wg_minus_health %>%
filter_age_wg()
wg_age_n <- nrow(wg_minus_health) - nrow(wg_minus_age)
ws_minus_age <-
ws_minus_health %>%
filter_age_ws()
ws_age_n <- nrow(ws_minus_health) - nrow(ws_minus_age)
age <-
c(
"Out of age range",
wg_age_n,
percent(wg_age_n / n_total_wg),
ws_age_n,
percent(ws_age_n / n_total_ws)
)
names(age) <- excl_col_names
#Now we need to get rid of people who did the survey too fast
wg_minus_fakes <-
wg_minus_age %>%
filter(completion_time >= min_completion_time)
wg_fake_n <- nrow(wg_minus_age) - nrow(wg_minus_fakes)
ws_minus_fakes <-
ws_minus_age %>%
filter(completion_time >= min_completion_time)
ws_fake_n <- nrow(ws_minus_age) - nrow(ws_minus_fakes)
fakes <-
c(
"Completed survey too quickly",
wg_fake_n,
percent(wg_fake_n / n_total_wg),
ws_fake_n,
percent(ws_fake_n / n_total_ws)
)
names(fakes) <- excl_col_names
#calculate total amount of WG exclusions
total_wg_exclusions <-
wg_repeats_n +
wg_premie_n +
wg_multiling_n +
wg_health_n +
wg_age_n +
wg_fake_n
#calculate total amount of WS exclusions
total_ws_exclusions <-
ws_repeats_n +
ws_premie_n +
ws_multiling_n +
ws_health_n +
ws_age_n +
ws_fake_n
#make a row in the table for this
totals <-
c(
"Total exclusions",
total_wg_exclusions,
percent(total_wg_exclusions / n_total_wg),
total_ws_exclusions,
percent(total_ws_exclusions / n_total_ws)
)
names(totals) <- excl_col_names
#now make the table
exclusion_tbl <-
bind_rows(repeat_admins, premies, multiling, health, age, fakes, totals)
knitr::kable(exclusion_tbl)
total_admin <- nrow(ws) + nrow(wg)
write_csv(
exclusion_tbl,
file = path(
project_root,
"data",
"exclusion_tables",
"ses_norming_exclusions",
ext = "csv"
)
)
View(all_wg_raw)
all_wg_raw %>%
getCompletionInterval() %>%
getMaternalEd() %>%
getEthnicities() %>%
select(
study_name,
subject_id,
sex,
age,
ethnicity,
maternal_ed,
words_produced = `Words Produced`,
completion_time,
maternal_ed,
ethnicity
)
all_ws_raw %>%
getCompletionInterval() %>%
getMaternalEd() %>%
getEthnicities() %>%
select(
study_name,
subject_id,
sex,
age,
ethnicity,
maternal_ed,
words_produced = `Total Produced`,
completion_time,
maternal_ed,
ethnicity
)
#All data, incomplete and incomplete
all_d <-
bind_rows(
all_wg_raw %>%
getCompletionInterval() %>%
getMaternalEd() %>%
getEthnicities() %>%
select(
study_name,
subject_id,
sex,
age,
ethnicity,
maternal_ed,
words_produced = `Words Produced`,
completion_time,
maternal_ed,
ethnicity
),
all_ws_raw %>%
getCompletionInterval() %>%
getMaternalEd() %>%
getEthnicities() %>%
select(
study_name,
subject_id,
sex,
age,
ethnicity,
maternal_ed,
words_produced = `Total Produced`,
completion_time,
maternal_ed,
ethnicity
)
)
View(all_d)
#All data, incomplete and incomplete
all_d <-
bind_rows(
all_wg_raw %>%
getCompletionInterval() %>%
getMaternalEd() %>%
getEthnicities() %>%
select(
study_name,
subject_id,
completed,
sex,
age,
ethnicity,
maternal_ed,
words_produced = `Words Produced`,
completion_time,
maternal_ed,
ethnicity
),
all_ws_raw %>%
getCompletionInterval() %>%
getMaternalEd() %>%
getEthnicities() %>%
select(
study_name,
subject_id,
completed,
sex,
age,
ethnicity,
maternal_ed,
words_produced = `Total Produced`,
completion_time,
maternal_ed,
ethnicity
)
)
#All data, incomplete and incomplete
all_d <-
bind_rows(
all_wg_raw %>%
getCompletionInterval() %>%
getMaternalEd() %>%
getEthnicities() %>%
select(
study_name,
subject_id,
completed,
sex,
age,
ethnicity,
maternal_ed,
words_produced = `Words Produced`,
completion_time,
maternal_ed,
ethnicity
) %>%
mutate(completed = as.character(completed)),
all_ws_raw %>%
getCompletionInterval() %>%
getMaternalEd() %>%
getEthnicities() %>%
select(
study_name,
subject_id,
completed,
sex,
age,
ethnicity,
maternal_ed,
words_produced = `Total Produced`,
completion_time,
maternal_ed,
ethnicity
) %>%
mutate(completed = as.character(completed))
)
incomplete <- all_d %>% filter(completed == "FALSE")
View(incomplete)
incomplete_summary <-
incomplete %>%
count(maternal_ed, ethnicity)
View(incomplete_summary)
incomplete_ethnicity <-
incomplete %>%
count(ethnicity)
incomplete_ethnicity <-
incomplete %>%
count(ethnicity)
incomplete_momed <-
incomplete %>%
count(maternal_ed)
View(incomplete_ethnicity)
View(incomplete_momed)
incomplete_vocab <-
incomplete %>%
filter(!is.na(words_produced))
View(incomplete_vocab)
incomplete_vocab %>%
ggplot(aes(age, words_produced)) +
geom_point() +
geom_line(method = "lm")
incomplete_vocab %>%
ggplot(aes(age, words_produced)) +
geom_point() +
geom_smooth(method = "lm")
incomplete_vocab %>%
ggplot(aes(completion_time)) +
geom_bar()
incomplete_vocab %>%
ggplot(aes(completion_time)) +
geom_histogram()
mean(incomplete_vocab$completion_time)
median(incomplete_vocab$completion_time)
summary(incomplete_vocab$completion_time)
#All data, incomplete and complete
all_d <-
bind_rows(
all_wg_raw %>%
getCompletionInterval() %>%
getMaternalEd() %>%
getEthnicities() %>%
select(
study_name,
subject_id,
completed,
completedBackgroundInfo,
sex,
age,
ethnicity,
maternal_ed,
words_produced = `Words Produced`,
completion_time,
maternal_ed,
ethnicity
) %>%
mutate(completed = as.character(completed)),
all_ws_raw %>%
getCompletionInterval() %>%
getMaternalEd() %>%
getEthnicities() %>%
select(
study_name,
subject_id,
completed,
completedBackgroundInfo,
sex,
age,
ethnicity,
maternal_ed,
words_produced = `Total Produced`,
completion_time,
maternal_ed,
ethnicity
) %>%
mutate(completed = as.character(completed))
)
incomplete <- all_d %>% filter(completed == "FALSE")
complete_bg <- incomplete %>% file(completedBackgroundInfo == "TRUE")
complete_bg <- incomplete %>% filter(completedBackgroundInfo == "TRUE")
View(completed_wg)
View(complete_bg)
View(incomplete_ethnicity)
complete_bg_ethnicity <-
complete_bg %>%
count(ethnicity)
View(complete_bg_ethnicity)
complete_bg_momed <-
complete_bg %>%
count(momed)
complete_bg_momed <-
complete_bg %>%
count(maternal_ed)
View(complete_bg_momed)
complete_bg_vocab <-
complete_bg %>%
filter(!is.na(words_produced))
complete_bg_vocab %>%
ggplot(aes(age, words_produced)) +
geom_point() +
geom_smooth(method = "lm")
incomplete %>%
ggplot(aes(age, words_produced, color = completedBackgroundInfo)) +
geom_point() +
geom_smooth(method = "lm")
incomplete_vocab %>%
ggplot(aes(age, words_produced)) +
geom_point() +
geom_smooth(method = "lm")
incomplete_vocab %>%
ggplot(aes(age, words_produced)) +
geom_point() +
geom_smooth(method = "loess")
incomplete_vocab %>%
ggplot(aes(age, words_produced)) +
geom_point() +
geom_smooth(method = "lm")
incomplete_vocab %>%
ggplot(aes(age, words_produced)) +
geom_point(aes(color = ethnicity)) +
geom_smooth(method = "lm")
incomplete_vocab %>%
ggplot(aes(age, words_produced, color = ethnicity)) +
geom_point() +
geom_smooth(method = "lm")
incomplete_vocab %>%
ggplot(aes(age, words_produced)) +
geom_point() +
geom_smooth(method = "lm")
#All data, incomplete and complete
all_d <-
bind_rows(
all_wg_raw %>%
getCompletionInterval() %>%
getMaternalEd() %>%
getEthnicities() %>%
select(
study_name,
subject_id,
link,
completed,
completedBackgroundInfo,
sex,
age,
ethnicity,
maternal_ed,
words_produced = `Words Produced`,
completion_time,
maternal_ed,
ethnicity
) %>%
mutate(completed = as.character(completed)),
all_ws_raw %>%
getCompletionInterval() %>%
getMaternalEd() %>%
getEthnicities() %>%
select(
study_name,
subject_id,
link,
completed,
completedBackgroundInfo,
sex,
age,
ethnicity,
maternal_ed,
words_produced = `Total Produced`,
completion_time,
maternal_ed,
ethnicity
) %>%
mutate(completed = as.character(completed))
)
incomplete
incomplete <- all_d %>% filter(completed == "FALSE")
complete_bg <- incomplete %>% filter(completedBackgroundInfo == "TRUE")
View(complete_bg)
View(all_d %>% filter(link == "http://webcdi.stanford.edu/form/fill/989e6a7936c1744375a67eb723b99be981257faa8ca6ab6762bc828b537da927"))
View(all_wg_raw %>% filter(link == "http://webcdi.stanford.edu/form/fill/989e6a7936c1744375a67eb723b99be981257faa8ca6ab6762bc828b537da927"))
View(all_wg_raw %>% filter(link == "http://webcdi.stanford.edu/form/fill/59349c4eaef0a64988d29a673e516994f125c5266547d9184f83cbc7cd5ad56a"))
View(incomplete)
View(incomplete_summary)
View(incomplete_ethnicity)
View(complete_bg_ethnicity)
View(complete_bg_vocab)
View(complete_bg_momed)
complete_bg %>%
count(study_name) %>% View()
View(complete_bg)
complete_bg %>%
filter(competion_time > min_completion_time)
complete_bg %>%
filter(completion_time > min_completion_time)
complete_bg %>%
filter(completion_time > min_completion_time) %>% View()
complete_bg %>%
filter(completion_time > min_completion_time) %>%
ggplot(aes(age, words_produced)) +
geom_point() +
geom_smooth(method = "lm")
complete_bg %>%
filter(completion_time > min_completion_time) %>%
count(ethnicity)
incomplete$completion_time %>% summary()
